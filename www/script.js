(function(){var Tooltip;window.Tooltip=Tooltip=function(){Tooltip.displayName="Tooltip";var prototype=Tooltip.prototype,constructor=Tooltip;Tooltip.counter=0;function Tooltip(options){var ref$;this.options=options!=null?options:{};this.onMouseMove=bind$(this,"onMouseMove",prototype);this.eventId="tooltip-"+constructor.counter++;(ref$=this.options).parent==null&&(ref$.parent=d3.select("body"));d3.select(document).on("mousemove."+this.eventId,bind$(this,"onMouseMove"))}prototype.watchElements=function(){var this$=this;d3.select(document).on("mouseover."+this.eventId,function(){var currentTarget,content;currentTarget=d3.event.target;do{content=currentTarget.getAttribute("data-tooltip");currentTarget=currentTarget.parentNode}while(currentTarget!==document&&content===null);if(!content){return}content=unescape(content);if(!content.length){return}return this$.display(content)});return d3.select(document).on("mouseout."+this.eventId,bind$(this,"hide"))};prototype.display=function(content){var x$;x$=this.$element=this.options.parent.append("div");x$.attr("class","tooltip");x$.html(content);return this.setPositionByMouse()};prototype.hide=function(){if(!this.$element){return}this.$element.remove();this.$element=null;return this.mouseBound=false};prototype.reposition=function(arg$){var left,top,clientLeft,clientTop,dX,dY,element,width,maxLeft,topMargin,x$;left=arg$[0],top=arg$[1],clientLeft=arg$[2],clientTop=arg$[3];dX=left-clientLeft;dY=top-clientTop;element=this.$element[0][0];width=element.offsetWidth;left-=width/2;maxLeft=(window.innerWidth||document.documentElement.clientWidth)-width;top-=element.offsetHeight;left=Math.max(dX,left);left=Math.min(left,dX+maxLeft);if(top<=19+dY){topMargin=-20;top+=element.offsetHeight-2*topMargin}x$=this.$element;x$.style("left",left+"px");x$.style("top",top+"px");return x$};prototype.setPositionByMouse=function(){this.mouseBound=true;if(this.lastMousePosition){return this.reposition(this.lastMousePosition)}};prototype.onMouseMove=function(){var evt;evt=d3.event;this.lastMousePosition=[evt.pageX||evt.clientX,evt.pageY||evt.clientY,evt.clientX,evt.clientY];if(this.mouseBound){return this.reposition(this.lastMousePosition)}};return Tooltip}();function bind$(obj,key,target){return function(){return(target||obj)[key].apply(obj,arguments)}}}).call(this);
//# sourceMappingURL=../js/script.js.map
//@ sourceMappingURL=./js/script.js.map
;
(function(){var t,n,e,a,o;if(window.ig={projectName:"komunalne-koalicni-kolecko",containers:{}},"undefined"!=typeof _gaq&&null!==_gaq&&_gaq.push(["_trackEvent","ig",ig.projectName]),t=document.querySelectorAll(".ig"),t.length)for(n=0,e=t.length;e>n;++n)a=t[n],window.ig.containers[a.getAttribute("data-ig")]=a;else document.body.className+=" ig",window.ig.containers.base=document.body;"undefined"!=typeof d3&&null!==d3&&(o=document.getElementById("fallback"))&&o.parentNode.removeChild(o)}).call(this),window.ig.data={style:".tooltip{font-family:arial,helvetica,sans-serif;z-index:50;position:absolute;border:1px solid #888;color:#111;border-radius:4px;background-color:#fff;padding:5px 10px;margin-top:-8px;margin-left:0;box-shadow:#aaa 0 0 1px}.tooltip p.only-child{margin:0}.ig{font-size:14px;margin:0;line-height:19px;font-family:arial,sans-serif}.ig *,.ig *:before,.ig *:after{box-sizing:border-box;-o-box-sizing:border-box;-ms-box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.ig a{color:#2c6fb3;text-decoration:underline}.ig a:active,.ig a:focus{text-decoration:none}.ig .leaflet-control-zoom a{text-decoration:none;color:#333}.ig .leaflet-control-attribution a{color:#036}.ig .fallback{position:absolute;top:0;left:0;width:100%;height:600px;background:#fff;z-index:10}.ig .fallback div{margin:270px 40px 0 40px;text-align:center;padding:20px 10px;border:1px dotted #aaa}.ig path.chord{fill-opacity:.3;stroke-opacity:1}.ig path.chord:hover{fill-opacity:.9}.ig text{font-size:1.4em}"},function(){var t,n;t=n=document.createElement("style"),t.innerHTML=ig.data.style,document.getElementsByTagName("head")[0].appendChild(n)}.call(this),function(){window.ig.getData=function(){function t(){var t,n,e=[];for(t=0,n=x;n>t;++t)e.push(t);return e}var n,e,a,o,i,r,l,d,f,c,u,s,g,p,h,b,S,x,m,v,k;for(n=[["KDU-ČSL","TOP 09",829],["KDU-ČSL","STAN",346],["KDU-ČSL","ODS",228],["KDU-ČSL","Zelení",368],["KDU-ČSL","Svobodní",54],["KDU-ČSL","Piráti",40],["KDU-ČSL","Soukromníci",27],["KDU-ČSL","ČSSD",39],["TOP 09","Zelení",191],["TOP 09","STAN",701],["TOP 09","ODS",205],["TOP 09","Piráti",112],["TOP 09","Svobodní",112],["STAN","Svobodní",127],["STAN","Piráti",171],["STAN","ODS",57],["STAN","Zelení",35],["ODS","Svobodní",616],["ODS","Soukromníci",43],["Svobodní","Soukromníci",192],["Svobodní","Piráti",60],["Slušní lidé","Soukromníci",394],["Zelení","Piráti",351],["Zelení","ČSSD",41],["SPD","SPOZ",162],["SPOZ","KSČM",56],["SPOZ","ČSSD",46]],e={"Strana zelených":"SZ"},a={},o=0,i=0,r=n.length;r>i;++i)l=n[i],d=l[0],f=l[1],void 0===a[d]&&(a[d]=o++),void 0===a[f]&&(a[f]=o++);for(c=[],i=0,r=n.length;r>i;++i)l=n[i],u=l[0],s=l[1],g=l[2],d=a[u],f=a[s],null==c[d]&&(c[d]=[]),null==c[f]&&(c[f]=[]),c[d][f]=g,c[f][d]=g,c[d].strana={nazev:u,zkratka:e[u]},c[f].strana={nazev:s,zkratka:e[s]};h=[];for(b in c)S=c[b],h.push(S);for(p=h,x=0,i=0,r=p.length;r>i;++i)m=p[i],x=Math.max(m.length,x);for(i=0,r=p.length;r>i;++i)for(m=p[i],v=0,k=(l=t()).length;k>v;++v)o=l[v],void 0===m[o]&&(m[o]=0);return p}}.call(this),function(){var t,n,e=[].slice;ig.utils=t={},t.offset=function(t,n){var e,a;e=0,a=0;do e+=t.offsetTop,a+=t.offsetLeft;while(t=t.offsetParent);return{top:e,left:a}},t.deminifyData=function(t){var n,e,a,o,i,r,l,d,f,c,u,s,g;for(e=[],a=0,i=(o=t.data).length;i>a;++a){for(r=o[a],l={},d=0,c=(f=t.columns).length;c>d;++d)u=d,s=f[d],l[s]=r[u];for(s in f=t.indices)g=f[s],l[s]=g[l[s]];e.push(l)}return n=e},t.formatNumber=function(t,e){var a,o;if(null==e&&(e=0),t=parseFloat(t),e){for(a=Math.floor(t),o=t%1,a=n(a),o=Math.round(o*Math.pow(10,e)),o=o.toString();o.length<e;)o="0"+o;return a+","+o}return a=Math.round(t),n(a)},n=function(t,n){var a,o,i,r,l,d,f,c,u;for(null==n&&(n=" "),a=Math.round(t).toString(),o=[],i=a.length,r=0,d=(l=[0].concat(e.call(i))).length;d>r;++r)f=l[r],o.unshift(a[i-f-1]),c=f===i-1,u=2===f%3,u&&!c&&o.unshift(n);return o.join("")}}.call(this),function(){var t;t=function(){var t,n,e,a,o,i,r,l,d,f,c,u,s,g,p,h,b,S,x,m,v,k,w;return t=ig.getData(),n=d3.select(ig.containers.base),(new Tooltip).watchElements(),e=a=d3.layout.chord(),e.matrix(t),e.padding(.05),o=window.innerWidth,i=window.innerWidth,r=.48*(window.innerWidth-60),l=275,d=["#ffff99","#6a3d9a","#a6cee3","#1f78b4","#b2df8a","#33a02c","black","#fdbf6f","#ff7f00","#b15928","gray","#fb9a99","#e31a1c"],f=function(t,n){return d[n]},c=d3.scale.ordinal().range(d),u=s=n.append("svg"),u.attr("width",o),u.attr("height",i),g=s.append("defs"),p=h=s.append("g"),p.attr("transform","translate("+o/2+", "+i/2+")"),b=d3.svg.arc().innerRadius(r).outerRadius(l+5),S=d3.svg.arc().innerRadius(r).outerRadius(l),x=h.selectAll("path.radius").data(a.groups).enter().append("path"),x.attr("class","radius"),x.style("fill",f),x.attr("d",S),m=g.selectAll("path").data(a.groups).enter().append("path"),m.attr("id",function(t,n){return"textPath-"+n}),m.attr("d",b),v=h.selectAll("text").data(a.groups).enter().append("text"),k=v.append("textPath"),k.attr("xlink:href",function(t,n){return"#textPath-"+n}),k.text(function(n,e){return t[e].strana.zkratka}),b=d3.svg.chord().radius(r),w=h.selectAll("path.chord").data(a.chords).enter().append("path"),w.attr("class","chord"),w.attr("d",b),w.style("fill",function(t,n){return c(n)}),w.style("stroke",function(t,n){return c(n)}),w.attr("data-tooltip",function(n){var e,a;return e=n.source,a=n.target,"<b>"+t[e.index].strana.nazev+"</b> a <b>"+t[a.index].strana.nazev+"</b> sdílí na kandidátkách <b>"+e.value+"</b> lidí"}),w},"undefined"!=typeof d3&&null!==d3?t():$(window).bind("load",function(){return"undefined"!=typeof d3&&null!==d3?t():void 0})}.call(this);