(function(){var Tooltip;window.Tooltip=Tooltip=function(){Tooltip.displayName="Tooltip";var prototype=Tooltip.prototype,constructor=Tooltip;Tooltip.counter=0;function Tooltip(options){var ref$;this.options=options!=null?options:{};this.onMouseMove=bind$(this,"onMouseMove",prototype);this.eventId="tooltip-"+constructor.counter++;(ref$=this.options).parent==null&&(ref$.parent=d3.select("body"));d3.select(document).on("mousemove."+this.eventId,bind$(this,"onMouseMove"))}prototype.watchElements=function(){var this$=this;d3.select(document).on("mouseover."+this.eventId,function(){var currentTarget,content;currentTarget=d3.event.target;do{content=currentTarget.getAttribute("data-tooltip");currentTarget=currentTarget.parentNode}while(currentTarget!==document&&content===null);if(!content){return}content=unescape(content);if(!content.length){return}return this$.display(content)});return d3.select(document).on("mouseout."+this.eventId,bind$(this,"hide"))};prototype.display=function(content){var x$;x$=this.$element=this.options.parent.append("div");x$.attr("class","tooltip");x$.html(content);return this.setPositionByMouse()};prototype.hide=function(){if(!this.$element){return}this.$element.remove();this.$element=null;return this.mouseBound=false};prototype.reposition=function(arg$){var left,top,clientLeft,clientTop,dX,dY,element,width,maxLeft,topMargin,x$;left=arg$[0],top=arg$[1],clientLeft=arg$[2],clientTop=arg$[3];dX=left-clientLeft;dY=top-clientTop;element=this.$element[0][0];width=element.offsetWidth;left-=width/2;maxLeft=(window.innerWidth||document.documentElement.clientWidth)-width;top-=element.offsetHeight;left=Math.max(dX,left);left=Math.min(left,dX+maxLeft);if(top<=19+dY){topMargin=-20;top+=element.offsetHeight-2*topMargin}x$=this.$element;x$.style("left",left+"px");x$.style("top",top+"px");return x$};prototype.setPositionByMouse=function(){this.mouseBound=true;if(this.lastMousePosition){return this.reposition(this.lastMousePosition)}};prototype.onMouseMove=function(){var evt;evt=d3.event;this.lastMousePosition=[evt.pageX||evt.clientX,evt.pageY||evt.clientY,evt.clientX,evt.clientY];if(this.mouseBound){return this.reposition(this.lastMousePosition)}};return Tooltip}();function bind$(obj,key,target){return function(){return(target||obj)[key].apply(obj,arguments)}}}).call(this);
//# sourceMappingURL=../js/script.js.map
//@ sourceMappingURL=./js/script.js.map
;
(function(){var t,e,n,a,o;if(window.ig={projectName:"komunalne-koalicni-kolecko",containers:{}},"undefined"!=typeof _gaq&&null!==_gaq&&_gaq.push(["_trackEvent","ig",ig.projectName]),t=document.querySelectorAll(".ig"),t.length)for(e=0,n=t.length;n>e;++e)a=t[e],window.ig.containers[a.getAttribute("data-ig")]=a;else document.body.className+=" ig",window.ig.containers.base=document.body;"undefined"!=typeof d3&&null!==d3&&(o=document.getElementById("fallback"))&&o.parentNode.removeChild(o)}).call(this),window.ig.data={style:".tooltip{font-family:arial,helvetica,sans-serif;z-index:50;position:absolute;border:1px solid #888;color:#111;border-radius:4px;background-color:#fff;padding:5px 10px;margin-top:-8px;margin-left:0;box-shadow:#aaa 0 0 1px}.tooltip p.only-child{margin:0}.ig{font-size:14px;margin:0;line-height:19px;font-family:arial,sans-serif}.ig *,.ig *:before,.ig *:after{box-sizing:border-box;-o-box-sizing:border-box;-ms-box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.ig a{color:#2c6fb3;text-decoration:underline}.ig a:active,.ig a:focus{text-decoration:none}.ig .leaflet-control-zoom a{text-decoration:none;color:#333}.ig .leaflet-control-attribution a{color:#036}.ig .fallback{position:absolute;top:0;left:0;width:100%;height:600px;background:#fff;z-index:10}.ig .fallback div{margin:270px 40px 0 40px;text-align:center;padding:20px 10px;border:1px dotted #aaa}.ig path.chord{fill-opacity:.3;stroke-opacity:1}.ig path.chord:hover{fill-opacity:.9}.ig text{font-size:1.4em}"},function(){var t,e;t=e=document.createElement("style"),t.innerHTML=ig.data.style,document.getElementsByTagName("head")[0].appendChild(e)}.call(this),function(){window.ig.getData=function(){function t(){var t,e,n=[];for(t=0,e=x;e>t;++t)n.push(t);return n}var e,n,a,o,i,r,l,d,c,f,u,s,g,p,h,b,S,x,m,v,k;for(e=[["KDU-ČSL","TOP 09",829],["STAN","TOP 09",701],["ODS","Svobodní",616],["Slušní lidé","Soukromníci",394],["KDU-ČSL","Zelení",368],["Piráti","Zelení",351],["KDU-ČSL","STAN",346],["KDU-ČSL","ODS",228],["ODS","TOP 09",205],["Soukromníci","Svobodní",192],["TOP 09","Zelení",191],["Piráti","STAN",171],["SPD","SPOZ",162],["STAN","Svobodní",127],["Piráti","TOP 09",112],["Svobodní","TOP 09",112],["Piráti","Svobodní",60],["ODS","STAN",57],["KSČM","SPOZ",56],["KDU-ČSL","Svobodní",54],["ČSSD","SPOZ",46],["ODS","Soukromníci",43],["ČSSD","Zelení",41],["KDU-ČSL","Piráti",40],["ČSSD","KDU-ČSL",39],["STAN","Zelení",35],["KDU-ČSL","Soukromníci",27]],n={"Strana zelených":"SZ"},a={},o=0,i=0,r=e.length;r>i;++i)l=e[i],d=l[0],c=l[1],void 0===a[d]&&(a[d]=o++),void 0===a[c]&&(a[c]=o++);for(f=[],i=0,r=e.length;r>i;++i)l=e[i],u=l[0],s=l[1],g=l[2],d=a[u],c=a[s],null==f[d]&&(f[d]=[]),null==f[c]&&(f[c]=[]),f[d][c]=g,f[c][d]=g,f[d].strana={nazev:u,zkratka:n[u]},f[c].strana={nazev:s,zkratka:n[s]};h=[];for(b in f)S=f[b],h.push(S);for(p=h,x=0,i=0,r=p.length;r>i;++i)m=p[i],x=Math.max(m.length,x);for(i=0,r=p.length;r>i;++i)for(m=p[i],v=0,k=(l=t()).length;k>v;++v)o=l[v],void 0===m[o]&&(m[o]=0);return p}}.call(this),function(){var t,e,n=[].slice;ig.utils=t={},t.offset=function(t,e){var n,a;n=0,a=0;do n+=t.offsetTop,a+=t.offsetLeft;while(t=t.offsetParent);return{top:n,left:a}},t.deminifyData=function(t){var e,n,a,o,i,r,l,d,c,f,u,s,g;for(n=[],a=0,i=(o=t.data).length;i>a;++a){for(r=o[a],l={},d=0,f=(c=t.columns).length;f>d;++d)u=d,s=c[d],l[s]=r[u];for(s in c=t.indices)g=c[s],l[s]=g[l[s]];n.push(l)}return e=n},t.formatNumber=function(t,n){var a,o;if(null==n&&(n=0),t=parseFloat(t),n){for(a=Math.floor(t),o=t%1,a=e(a),o=Math.round(o*Math.pow(10,n)),o=o.toString();o.length<n;)o="0"+o;return a+","+o}return a=Math.round(t),e(a)},e=function(t,e){var a,o,i,r,l,d,c,f,u;for(null==e&&(e=" "),a=Math.round(t).toString(),o=[],i=a.length,r=0,d=(l=[0].concat(n.call(i))).length;d>r;++r)c=l[r],o.unshift(a[i-c-1]),f=c===i-1,u=2===c%3,u&&!f&&o.unshift(e);return o.join("")}}.call(this),function(){var t;t=function(){var t,e,n,a,o,i,r,l,d,c,f,u,s,g,p,h,b,S,x,m,v,k,y;return t=ig.getData(),e=d3.select(ig.containers.base),(new Tooltip).watchElements(),n=a=d3.layout.chord(),n.matrix(t),n.padding(.05),o=610,i=610,r=264,l=275,d=["#ffff99","#6a3d9a","gray","#1f78b4","#33a02c","#b15928","#fdbf6f","#b2df8a","black","#a6cee3","#fb9a99","#e31a1c","#ff7f00"],c=function(t,e){return d[e]},f=d3.scale.category20c(),u=s=e.append("svg"),u.attr("width",o),u.attr("height",i),g=s.append("defs"),p=h=s.append("g"),p.attr("transform","translate("+o/2+", "+i/2+")"),b=d3.svg.arc().innerRadius(r).outerRadius(l+5),S=d3.svg.arc().innerRadius(r).outerRadius(l),x=h.selectAll("path.radius").data(a.groups).enter().append("path"),x.attr("class","radius"),x.style("fill",c),x.attr("d",S),m=g.selectAll("path").data(a.groups).enter().append("path"),m.attr("id",function(t,e){return"textPath-"+e}),m.attr("d",b),v=h.selectAll("text").data(a.groups).enter().append("text"),k=v.append("textPath"),k.attr("xlink:href",function(t,e){return"#textPath-"+e}),k.text(function(e,n){return t[n].strana.zkratka}),b=d3.svg.chord().radius(r),y=h.selectAll("path.chord").data(a.chords).enter().append("path"),y.attr("class","chord"),y.attr("d",b),y.style("fill",function(t,e){return f(e)}),y.style("stroke",function(t,e){return f(e)}),y.attr("data-tooltip",function(e){var n,a;return n=e.source,a=e.target,"<b>"+t[n.index].strana.nazev+"</b> a <b>"+t[a.index].strana.nazev+"</b> sdílí na kandidátkách <b>"+n.value+"</b> lidí"}),y},"undefined"!=typeof d3&&null!==d3?t():$(window).bind("load",function(){return"undefined"!=typeof d3&&null!==d3?t():void 0})}.call(this);